<!DOCTYPE html>
<html>
<head>
    <title>Background Remover</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix"></script>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f0f0; }
        canvas { border: 1px solid black; }
    </style>
</head>
<body>
    <input type="file" id="upload" accept="image/*" />
    <canvas id="canvas"></canvas>
    <script>
        const upload = document.getElementById('upload');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let net;

        async function loadModel() {
            net = await bodyPix.load();
        }

        async function removeBackground(image) {
            const segmentation = await net.segmentPerson(image);
            const mask = bodyPix.toMask(segmentation);
            ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
            ctx.putImageData(mask, 0, 0);
        }

        upload.addEventListener('change', async () => {
            const file = upload.files[0];
            const img = new Image();
            img.src = URL.createObjectURL(file);

            img.onload = async () => {
                canvas.width = img.width;
                canvas.height = img.height;
                await removeBackground(img);
            };
        });

        loadModel();
    </script>
</body>
</html>